<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" th:lang="${accessibility}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title><th:block th:text="#{signin.page.title}"></th:block></title>
    <link rel="shortcut icon" th:href="@{/images/favicon.ico(cacheVersion=${contentCacheVersion})}" />
    <link rel="stylesheet" th:href="@{/css/font/font.css(cacheVersion=${contentCacheVersion})}" />
    <link rel="stylesheet" th:href="@{/css/user-style.css(cacheVersion=${contentCacheVersion})}" />
    <script type="text/javascript" th:src="@{/externlib/jquery-3.3.1/jquery.min.js(cacheVersion=${contentCacheVersion})}"></script>
    <script type="text/javascript" th:src="@{/js/common.js(cacheVersion=${contentCacheVersion})}"></script>
    <script type="text/javascript" th:src="@{/js/messages_{lang}.js(lang=${lang},cacheVersion=${contentCacheVersion})}"></script>
    <style type="text/css">
    /* scrollbar */
    ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f4f2f2; }
        ::-webkit-scrollbar-thumb { background: #e0e0e0; }
        ::-webkit-scrollbar-button { display: none; }

        fieldset {padding: 0.35em 0.75em 0.625em;}
        img, fieldset { padding: 0; border: none; }
        legend, caption { width:0; height:0; font-size:0; line-height:0; overflow:hidden; visibility:hidden; display: none;}
        legend {box-sizing: border-box; /* 1 */  color: inherit; /* 2 */  display: table; /* 1 */  max-width: 100%; /* 1 */  padding: 0; /* 3 */  white-space: normal; /* 1 */}
        .blind {overflow:hidden; visibility:hidden; position:absolute; width:0; height:0; line-height:0; }

        /* Simple button */
        .button,
        button,
        input[type="submit"],
        input[type="reset"],
        input[type="button"],
        .ui-dialog .ui-dialog-buttonpane button {
        display: inline-block;
        font-size: 1.2rem;
        /*height: 30px; */
        padding: 6px 10px;
        box-sizing: border-box;
        margin: 0;
        text-align: center;
        color: black;
        font-family: 'NotoKrR';
        background: #e9e9ea;
        text-transform: uppercase;
        text-decoration: none;
        white-space: nowrap;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 0;
        border: 1px solid #d9d9da;
        cursor: pointer; }

        /* 로그인 */
        html, body { height: 100%; margin: 0; padding: 0;}
        #loginwrap {width:100%; height:100%; background:#ececee;}
        /* #loginwrap {width:100%; height:100%; background:url(/images/en/login_bg.png) no-repeat left bottom;}*/
        #loginwrap fieldset {padding:0;}
        /* #login {width:600px; margin:0 auto; height:100%; padding:0; background:white; border:0; box-shadow: 0 0 7px 3px #e2e3e4;} */
        #login { position: absolute;top: 50%; left: 50%; width:420px; border-radius: 20px;transform: translate(-50%, -50%);box-shadow: 0 0 10px 3px #c6c6c6; background-color: #fff; width: 450px;}
        #signup-complete {width:580px; margin:0 auto; height:400px; padding:0; background:white; border-radius:8px; position:absolute; top:50%; left:50%; margin-top:-380px; margin-left:-280px;}
        .select-lang {margin: 30px 50px 100px;}
        .language {float:right; font-size:15px; padding:5px; }
        .login-wrapper {margin:0 70px;  padding:0;}
        p.stitle {font-family: 'NotoKrR'; font-size:14px; margin-top:30px; height:30px; color:#444444; text-align:center;}
        span.mago {color:#6649ca;}
        .login-wrapper img {clear:both; display:block; text-align:center; margin-left:auto; margin-right:auto; margin-top:50px;}
        .login-wrapper .btn-login {clear:both; display:block; width:100%; height:60px; padding:0; margin:0; font-size:20px; cursor:pointer; background:#0066a2; color:white; font-family: 'NotoKrM'; border-radius: 5px;}
        .login-wrapper .inputid {clear:both; display:block;  padding:0; margin:10px 0; text-indent:10px; width:100%; text-align:left; height:48px; line-height:45px;font-size:22px; color:#444444; border:2px solid #555; border-radius:3px; box-sizing: border-box; font-family: 'NotoKrL'; letter-spacing:-1px; background:white;}
        .login-wrapper .inputpwd {clear:both; display:block; padding:0; margin:10px 0; text-indent:10px; width:100%; text-align:left; height:48px; line-height:45px; font-size:22px; color:#444444; border:2px solid #555; border-radius:3px; box-sizing: border-box; font-family: 'NotoKrL'; letter-spacing:-1px; background:white;}
        .login-wrapper input {background:white;}
        .login-wrapper input:focus {transition:0.3s; border:1px solid #4a9afd;}
        .login-wrapper > ul.join {clear:both; margin:0 0 0 0; padding:0 0 0 0; }
        .login-wrapper > ul.join li {float:left; padding:20px 20px 0 0; list-style:none; margin:0; font-size:16px; font-family: 'NotoKrR';}
        .login-wrapper > ul.join li.on a {color:#2a5bd3;}
        .login-wrapper > ul.join li a:hover, .login-wrapper > ul.join li a:focus {text-decoration:underline;}
        .login-wrapper > .autologin {clear:both; padding:0; margin:0 auto;  height:60px; }
        .login-wrapper > .autologin > span {float:left; display:inline-block; line-height:40px; margin-left:40px; margin-right:20px; font-size:15px;}
        .login-wrapper > .autologin ul {display:block; margin-top:22px; background: url(../../images/ic_sbmenu.png)}
        .login-wrapper > .autologin ul li {list-style:none; display:inline-block; float:left; margin-left:5px; }
        .login-wrapper > .autologin ul li .login-google {display:inline-block; width:42px; height:42px; background:white url(../../images/ic_sbmenu.png) -334px 1px no-repeat;}
        .login-wrapper > .autologin ul li .login-facebook {display:inline-block;width:42px; height:42px; background:white url(../../images/ic_sbmenu.png) -400px 1px no-repeat;}
        .login-wrapper > .autologin ul li .login-naver {display:inline-block;width:42px; height:42px; background:white url(../../images/ic_sbmenu.png) -464px 1px no-repeat;}
        .login-wrapper > .autologin ul li .login-kakao {display:inline-block;width:42px; height:42px; background:white url(../../images/ic_sbmenu.png) -526px 1px no-repeat;}
        .copyright { margin: 0 70px 20px; padding:0 0 10px; font-size:15px; color:#4f4f4f; text-align:center; font-family: 'NotoKrL'; border-top:1px solid #cecece;}
        .btn-login:hover, .btn-login:focus {background:#0078be; border:1px solid #1080e9;}
        h1.signin { color: #262b3f; font-weight: normal; width: 420px !important; font-size: 38px;}
        .term { text-decoration: underline; cursor: pointer;}
    </style>
</head>
<body>
<div id="loginwrap">
    <div id="login">
        <form class="select-lang">
            <select id="userLocale" name="userLocale" class="language" onchange="changeLanguage(this.value);">
                <option value="ko"><th:block th:text="#{common.korea}"></th:block></option>
                <option value="en"><th:block th:text="#{common.english}"></th:block></option>
            </select>
        </form>
        <div class="login-wrapper">
            <h1 class="signin">OpenIndoorMap</h1>
            <form id="signinForm" th:object="${signinForm}" method="post" action="/sign/process-signin" autocomplete="off">
                <fieldset>
                    <legend><th:block th:text="#{signin.legend}"></th:block></legend>
                    <label for="userId"><span class="blind" ><th:block th:text="#{common.id}"></th:block></span></label>
                    <input type="text" id="userId" name="userId" class="inputid" th:title="#{common.id}" th:placeholder="#{common.id}" required="required" autofocus="autofocus" />
                    <label for="password"><span class="blind"><th:block th:text="#{common.password}"></th:block></span></label>
                    <input type="password" id="password" name="password" class="inputpwd" th:title="#{common.password}" th:placeholder="#{common.password}" required="required" />
                    <button type="submit" class="btn-login"><th:block th:text="#{common.sign.in}"></th:block></button>
                </fieldset>
            </form>
            <ul class="join">
            <!--
                <li class="on"><a href="/sign/signup"><th:block th:text="#{common.sign.up}"></th:block></a></li>
                <li><a href="/sign/password/find"><th:block th:text="#{common.find.password}"></th:block></a></li>
            -->
            </ul>
            <div class="autologin">
                <span><th:block th:text="#{common.social.sign.in}"></th:block></span>
                <ul>
                    <li><a href="/sign/google" class="login-google" th:title="#{social.sign.in.google}"></a></li>
                    <li th:if="${#arrays.contains(@environment.getActiveProfiles(), 'dev')}"><a href="/sign/kakao" class="login-kakao" th:title="#{social.sign.in.kakao}"></a></li>
                <!--
                    <li><a href="/sign/kakao" class="login-kakao" th:title="#{social.sign.in.kakao}"></a></li>
                    <li><a href="/sign/facebook" class="login-facebook" th:title="#{social.sign.in.facebook}"></a></li>
                    <li><a href="/sign/naver" class="login-naver" th:title="#{social.sign.in.naver}"></a></li>
                -->
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; Gaia3d Corp. All Rights Reserved. </p>
            <a th:href="@{/docs/OIMTermofUseVer1.0.htm}" class="term" target="_blank">Terms of Use</a>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">

    $(document).ready(function() {
        var lang = "[[${lang}]]";
        $("#userLocale").val(lang);
        if("[[${signinForm.errorCode}]]"){
            var errorCode = "[[${signinForm.errorCode}]]";
            alert(JS_MESSAGE[errorCode]);
        }
    });

    function changeLanguage(lang) {
        $.ajax({
            url: "/languages/" + lang,
            type: "GET",
            headers: {"X-Requested-With": "XMLHttpRequest"},
            dataType: "json",
            success: function(msg){
                if(msg.statusCode <= 200) {
                    alert(JS_MESSAGE["change"]);
                    location.reload();
                }else {
                    alert(JS_MESSAGE[msg.errorCode]);
                }
            },
            error:function(request, status, error){
                console.log("code : " + request.status + "\n" + "message : " + request.responseText + "\n" + "error : " + error);
                alert(JS_MESSAGE["ajax.error.message"]);
            }
        });
    }
</script>
</html>