<!DOCTYPE html>
<html th:lang="${accessibility}" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="/layouts/default">
<head>
    <meta charset="utf-8">
    <title>사용자 목록</title>
    <th:block layout:fragment="pageCustomStyle">
        <link rel="stylesheet" th:href="@{/css/{lang}/font/font.css(lang=${lang}, cacheVersion=${contentCacheVersion})}" />
        <link rel="stylesheet" th:href="@{/images/{lang}/icon/glyph/glyphicon.css(lang=${lang}, cacheVersion=${contentCacheVersion})}" />
        <link rel="stylesheet" th:href="@{/externlib/normalize/normalize.min.css(cacheVersion=${contentCacheVersion})}" />
        <link rel="stylesheet" th:href="@{/externlib/jquery-ui-1.12.1/jquery-ui.min.css(cacheVersion=${contentCacheVersion})}" />
        <link rel="stylesheet" th:href="@{/css/{lang}/admin-style.css(lang=${lang}, cacheVersion=${contentCacheVersion})}" />
    </th:block>
</head>
<body>
<th:block layout:fragment="pageCustomContent">
    <div class="site-body">
        <div class="container">
            <div class="site-content">
                <div th:replace="~{/fragments/sub-menu :: #subMenuWrap}"></div>
                <div class="page-area">
                    <div th:replace="~{/fragments/page-header :: #pageHeaderWrap}"></div>
                    <div class="page-content">

                        <!-- S: 검색 -->
                        <div class="filters">
                            <form id="searchForm" method="get" th:action="@{#}"  onsubmit="return searchCheck();">
                                <div class="input-group row">
                                    <div class="input-set">
                                        <label for="searchWord" th:text="#{term}"></label>
                                        <select id="searchWord" name="from" class="selectBoxClass">
                                            <th:block th:each="num : ${#numbers.sequence(2019, 2029)}">
                                            <option th:text="${num}" th:value="${num}" th:selected="${num} == ${from}">2019</option>
                                            </th:block>
                                        </select>
                                        ~
                                        <select id="searchOption" name="to" class="selectBoxClass">
                                            <th:block th:each="num : ${#numbers.sequence(2019, 2029)}">
                                            <option th:text="${num}" th:value="${num}" th:selected="${num} == ${to}">2019</option>
                                            </th:block>
                                        </select>
                                    </div>
                                    <div class="input-set">
                                        <input type="submit" th:value="#{search}" />
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- E: 검색 -->

                        <!-- S: 사용자 목록-->
                        <div class="list">
                            <form id="listForm" th:object="${userInfo}" method="post">
                                <table class="list-table scope-col" summary="사용자 목록 조회 ">
                                    <caption class="hiddenTag">사용자 목록</caption>
                                    <colgroup>
                                        <col class="col-number"></col>
                                        <col class="col-name"></col>
                                        <col class="col-name"></col>
                                        <col class="col-name"></col>

                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col">년도</th>
                                            <th scope="col">1</th>
                                            <th scope="col">2</th>
                                            <th scope="col">3</th>
                                            <th scope="col">4</th>
                                            <th scope="col">5</th>
                                            <th scope="col">6</th>
                                            <th scope="col">7</th>
                                            <th scope="col">8</th>
                                            <th scope="col">9</th>
                                            <th scope="col">10</th>
                                            <th scope="col">11</th>
                                            <th scope="col">12</th>
                                            <th scope="col">합계</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:if="${list.empty}">
                                            <td colspan="14" class="col-none">통계 목록이 존재하지 않습니다.</td>
                                        </tr>
                                        <tr th:unless="${list.empty}" th:each="year : ${list}">
                                            <td class="col-name" th:text="${#strings.defaultString(year.year, '합계')}" th:colspan="${#strings.isEmpty(year.year) ? 13: 1}"></td>
                                            <td class="col-type" th:if="${not #strings.isEmpty(year.year)}" th:text="${month}"  th:each="month : ${year.month}" ></td>
                                            <td class="col-type" th:if="${#strings.isEmpty(year.year)}" th:text="${year.month[0]}" ></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </form>
                        </div>
                        <!-- E: 사용자 목록-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 사용자 그룹 -->
    <div th:replace="~{/user-group/user-group-info-dialog :: #userGroupInfoDialog}"></div>
</th:block>
<th:block layout:fragment="pageCustomScript">
<script type="text/javascript" th:src="@{/externlib/jquery-3.3.1/jquery.min.js(cacheVersion=${contentCacheVersion})}"></script>
<script type="text/javascript" th:src="@{/externlib/jquery-ui-1.12.1/jquery-ui.min.js(cacheVersion=${contentCacheVersion})}"></script>
<script type="text/javascript" th:src="@{/js/{lang}/common.js(lang=${lang}, cacheVersion=${contentCacheVersion})}"></script>
<script type="text/javascript" th:src="@{/js/{lang}/message.js(lang=${lang}, cacheVersion=${contentCacheVersion})}"></script>
<script type="text/javascript" th:src="@{/js/navigation.js(cacheVersion=${contentCacheVersion})}"></script>
<script type="text/javascript">

    function searchCheck() {
        if($("#searchOption").val() == "1") {
            if(confirm(JS_MESSAGE["search.option.warning"])) {
                // go
            } else {
                return false;
            }
        }

        var startDate = $("#startDate").val();
        var endDate = $("#endDate").val();
        if(startDate != null && startDate != "" && endDate != null && endDate != "") {
            if(parseInt(startDate) > parseInt(endDate)) {
                alert(JS_MESSAGE["search.date.warning"]);
                $("#startDate").focus();
                return false;
            }
        }
        return true;
    }
</script>
</th:block>
</body>
</html>
